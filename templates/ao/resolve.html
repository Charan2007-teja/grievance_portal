{% extends "base.html" %}
{% block content %}

<div class="d-flex justify-content-center mt-4">
  <div class="card shadow p-4 w-100" style="max-width:750px; border-radius:14px;">

    <!-- Header -->
    <h3 class="text-danger fw-bold mb-2">
      Resolve Complaint #{{ complaint.id }} — {{ complaint.title }}
    </h3>

    <p>
      <b>Status:</b>
      {% if complaint.status == "Pending" %}
          <span class="badge bg-warning text-dark">Pending</span>
      {% elif complaint.status == "In Progress" %}
          <span class="badge bg-info text-dark">In Progress</span>
      {% else %}
          <span class="badge bg-success">Resolved</span>
      {% endif %}
    </p>

    <hr>

    <!-- AO Response -->
    <h5 class="fw-semibold">AO Response</h5>
    <div class="alert alert-info border">
      <b>{{ complaint.response_by }}:</b><br>
      {{ complaint.response.replace('\n','<br>')|safe }}
    </div>

    <hr>

    {% if complaint.status == "Resolved" %}
      <div class="alert alert-success fw-semibold mt-3">
        ✔ This complaint is already resolved.
      </div>
    {% else %}

      <h4 class="text-primary fw-bold">Mark as Resolved</h4>

      <!-- Only Status Change — NO FINAL UPLOAD -->
      <form method="POST" class="mt-3">

        <p class="text-muted">
          Click below to mark this complaint as fully resolved.
        </p>

        <button class="btn btn-danger w-100 fw-semibold">
          ✔ Mark as Resolved
        </button>

      </form>

    {% endif %}

  </div>
</div>

{% endblock %}
